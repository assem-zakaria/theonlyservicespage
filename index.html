<!DOCTYPE HTML>
<html lang="en-US" class="no-scroll">

<head>
    <meta charset="utf-8">
    <title>The Only Agency Intro Animation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="The Only Agency Intro Animation"/>

    <!-- Begin Stylesheets -->
        <link type="text/css" rel="stylesheet" href="css/reset.css">
        <link type="text/css" rel="stylesheet" href="css/swiper-bundle.min.css">
        <link type="text/css" rel="stylesheet" href="css/styles.css">
    <!-- End Stylesheets -->
</head>


<body>

    <!-- Begin Main -->
        <main>

            <canvas id="serviceCanvas"></canvas>

            <!--  Services List  -->
                <section id="services_list_section">
                    
                    <!--  Item  -->
                        <div class="service-list-item">
                            <div class="sli-wrapper">
                                <h3>Website Design & Development</h3>

                                <div class="sli-right-cont">
                                    <p>In a world moving at the speed of light, we don’t just keep up with change; we lead it. Our digital innovation services turn ideas into interactive experiences and transform websites into gateways to new worlds alive with possibilities.</p>

                                    <div class="sli-dropdown">
                                        <button>
                                            SHOW MORE
                                            <div>
                                                <img src="./images/down-arrow.png">
                                                <img src="./images/close-button.png">
                                            </div>
                                        </button>
                                        <ul>
                                            <li>SITE ARCHITECTURE PLANNING</li>
                                            <li>UI/UX DESIGN</li>
                                            <li>WEBSITE DEVELOPMENT</li>
                                            <li>MAINTENANCE & TECHNICAL SUPPORT</li> 
                                            <li>PERFORMANCE ANALYSIS & REPORTING</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    <!--  Item  -->
                        <div class="service-list-item">
                            <div class="sli-wrapper">
                                <h3>SEARCH ENGINE OPTIMIZATION</h3>

                                <div class="sli-right-cont">
                                    <p>We are the global #1 in search engine optimization. Visibility isn’t enough—you need to lead. Our SEO strategies elevate your digital presence, making your brand the top choice in search results and delivering impactful performance that amplifies your reach and appeal.</p>

                                    <div class="sli-dropdown">
                                        <button>
                                            SHOW MORE
                                            <div>
                                                <img src="./images/down-arrow.png">
                                                <img src="./images/close-button.png">
                                            </div>
                                        </button>
                                        <ul>
                                            <li>SEO DEVELOPMENT</li>
                                            <li>PERFORMANCE ANALYSIS & REPORTING</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    <!--  Item  -->
                        <div class="service-list-item">
                            <div class="sli-wrapper">
                                <h3>DATA ANALYSIS & MONITORING</h3>

                                <div class="sli-right-cont">
                                    <p>In a world full of information, data analysis is the key to understanding audiences and making strategic decisions. We leverage the latest tools and technologies to monitor audience sentiments, study competitors, and analyze market trends. Our goal is to turn data into actionable insights that help your brand stand out and stay ahead.</p>

                                    <div class="sli-dropdown">
                                        <button>
                                            SHOW MORE
                                            <div>
                                                <img src="./images/down-arrow.png">
                                                <img src="./images/close-button.png">
                                            </div>
                                        </button>
                                        <ul>
                                            <li>Social Media and Sentiment Analysis Report (SMSA)</li>
                                            <li>Advanced Social Media and Sentiment Analysis Report (ASMSA)</li>
                                            <li>Advanced Social Media and Sentiment Analysis (Industry) Report (ASMSAI)</li>
                                            <li>Share of Voice Analysis Report (SVA)</li>
                                            <li>Competitors Analysis Report (CA)</li>
                                            <li>Competitors Advanced Analysis (CAA)</li>
                                            <li>Competitors Market Influencers Report List</li>
                                            <li>Influencer Analysis (IA)</li> 
                                            <li>Influencer Advanced Analysis (IAA)</li> 
                                            <li>Campaign Social Listening Analysis</li>
                                            <li>Industry Trends Analysis (TA)</li>
                                            <li>Trends Advanced Analysis (TAA)</li>
                                            <li>Real-Time Reporting</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                    <!--  Item  -->
                        <div class="service-list-item">
                            <div class="sli-wrapper">
                                <h3>NEURO MARKETING</h3>

                                <div class="sli-right-cont">
                                    <p>Neuromarketing takes you deep into how your audience engages with your brand. Using techniques such as facial coding, eye tracking, and EEG analysis, we decode emotions and subconscious decisions to understand audience reactions. Our goal is to empower your brand with scientifically-driven marketing decisions that create memorable and impactful experiences.</p>

                                    <div class="sli-dropdown">
                                        <button>
                                            SHOW MORE
                                            <div>
                                                <img src="./images/down-arrow.png">
                                                <img src="./images/close-button.png">
                                            </div>
                                        </button>
                                        <ul>
                                            <li>FACIAL CODING</li>
                                            <li>EYE TRACKING</li>
                                            <li>EEG</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                </section>

            <!--  Projects Screens  -->
                <section id="proj_screens">
                    
                    <!-- Screen Progress -->
                        <div id="proj_screens_progress">
                            <svg width="200" height="200" viewBox="0 0 200 200">
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#FFFFFF" stroke-width="3"/>
                                <circle cx="100" cy="100" r="80" fill="none" stroke="#00DFFF" stroke-width="7"
                                    stroke-dasharray="502" stroke-dashoffset="502"/>
                            </svg>
                        </div>

                    <!--  Item  -->
                        <div class="proj-screen-item">
                            <a href="">
                                <span>Saudi Heritage Event</span>
                                <span>Saudi Heritage Event</span>
                            </a>
                            <img src="./images/project-fs-1.jpg">
                        </div>

                    <!--  Item  -->
                        <div class="proj-screen-item">
                            <a href="">
                                <span>Jeddah Architecture Expo</span>
                                <span>Jeddah Architecture Expo</span>
                            </a>
                            <img src="./images/project-fs-2.jpg">
                        </div>

                    <!--  Item  -->
                        <div class="proj-screen-item">
                            <a href="">
                                <span>Red Sea International Film Festival</span>
                                <span>Red Sea International Film Festival</span>
                            </a>
                            <img src="./images/project-fs-3.jpg">
                        </div>

                    <!--  Item  -->
                        <div class="proj-screen-item">
                            <a href="">
                                <span>Riyadh Dates Festival - 2024</span>
                                <span>Riyadh Dates Festival - 2024</span>
                            </a>
                            <img src="./images/project-fs-4.jpg">
                        </div>
                </section>

            <section class="other-contents">
                other content
            </section>

            <section class="other-contents">
                other content
            </section>

        </main>
    <!-- End Main -->


    <!-- Begin JavaScript Files -->
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js"></script>
    <!-- End JavaScript Files -->


    <!-- Begin Animation JavaScript -->
        <script type="text/javascript">

            (function () {

                //  Variables
                    const item_els = gsap.utils.toArray('.service-list-item');
                    const slide_items = document.querySelectorAll('#proj_screens .proj-screen-item');
                    const progressContainer = document.getElementById('proj_screens_progress');
                    const canvas_el = document.getElementById('serviceCanvas');

                //  Swiper Progress Numbers (Loop through the items and create <span> elements)
                    slide_items.forEach((_, index) => {
                      const span = document.createElement('span');
                      span.textContent = (index + 1).toString().padStart(2, '0'); // format as 01, 02, etc.
                      progressContainer.appendChild(span);
                    });

                //  Desktop Function
                    function desktopFunction() {

                        //  Services List
                            item_els.forEach(item => {
                                gsap.set(item, { x: 600 });
                            });

                            item_els.forEach(item => {
                            gsap.to(item, { 
                                x: 0,
                                ease: "power4.out",
                                immediateRender: false,
                                scrollTrigger: {
                                  trigger: item,
                                  start: "top 90%",
                                  end: "+=1000px",
                                  scrub: 1.5,
                                }
                              })
                            });
                            

                        //  Projects Screen
                            slide_items.forEach((el, index) => {
                                el.style.zIndex = slide_items.length - index;
                                gsap.set(el, { clipPath: "polygon(0 0, 100% 0, 100% 100%, 0% 100%)" });
                            });

                            const hero_section_tl = gsap.timeline({
                                scrollTrigger: {
                                    trigger: "#proj_screens",
                                    start: "top top",
                                    end: "+=400%",
                                    pin: true,
                                    anticipatePin: 0.1,
                                    scrub: 1,
                                    ease: 'none',
                                    onUpdate: function (self) {
                                        const progress = self.progress * 100;
                                        const mappedProgress = 501 + (progress / 100) * (1010 - 501);

                                        // Animate the strokeDasharray
                                        const circle = document.querySelector("#proj_screens_progress svg circle:nth-of-type(2)");
                                        gsap.to(circle, {
                                            strokeDasharray: mappedProgress.toFixed(2)
                                        });

                                        // Get dynamic elements
                                        const items = document.querySelectorAll("#proj_screens .proj-screen-item");
                                        const spans = document.querySelectorAll("#proj_screens #proj_screens_progress span");

                                        const itemCount = items.length;
                                        const segmentSize = 100 / itemCount;

                                        // Find current segment index based on progress
                                        let activeIndex = Math.floor(progress / segmentSize);
                                        if (activeIndex >= itemCount) activeIndex = itemCount - 1;

                                        // Update span visibility
                                        spans.forEach((el, index) => {
                                            if (index === activeIndex) {
                                                el.classList.add("show");
                                            } else {
                                                el.classList.remove("show");
                                            }
                                        });
                                    },
                                }
                            });

                            const elements_except_last = gsap.utils.toArray(".proj-screen-item:not(:last-child)");

                            // Animate each element individually
                            elements_except_last.forEach((item, index) => {

                                hero_section_tl.to(item, {
                                    css: { 
                                        clipPath: "polygon(0px 0%, 100% 0px, 100% 0px, 0px 0px)",
                                        WebkitClipPath: "polygon(0px 0px, 100% 0px, 100% 0px, 0px 0px)"
                                    },
                                    stagger: 0.5,
                                });

                                hero_section_tl.to(item.querySelector('img'), {
                                    scale: 1.3,
                                    stagger: 0.5,
                                }, "<");
                            });

                        window.addEventListener("load", () => {
                            ScrollTrigger.refresh();
                        });

                    }

                //  Mobile Timeline
                    function mobileFunction() {

                        console.log("mobileFunction");

                        ScrollTrigger.config({ 
                            ignoreMobileResize: true,
                            autoRefreshEvents: "",
                        });

                        ScrollTrigger.normalizeScroll(true);



                        //  Services List
                            item_els.forEach(item => {
                                gsap.set(item, { x: 400 });
                            });

                            item_els.forEach(item => {
                            gsap.to(item, { 
                                x: 0,
                                ease: "power4.out",
                                immediateRender: false, // Prevents GSAP from applying the animation before ScrollTrigger
                                scrollTrigger: {
                                  trigger: item,
                                  start: "top 80%",
                                  end: "+=1000px",
                                  scrub: 0.5,
                                }
                              })
                            });
                        
                        //  Projects Screen
                            slide_items.forEach((el, index) => {
                                el.style.zIndex = slide_items.length - index;
                                gsap.set(el, { clipPath: "polygon(0 0, 100% 0, 100% 100%, 0% 100%)" });
                            });

                            const hero_section_tl = gsap.timeline({
                                scrollTrigger: {
                                    trigger: "#proj_screens",
                                    start: "top top",
                                    end: "+=400%",
                                    pin: true,
                                    anticipatePin: 1,
                                    scrub: 1,
                                    ease: 'none',
                                    onUpdate: function (self) {
                                        const progress = self.progress * 100;
                                        const mappedProgress = 501 + (progress / 100) * (1010 - 501);

                                        // Animate the strokeDasharray
                                        const circle = document.querySelector("#proj_screens_progress svg circle:nth-of-type(2)");
                                        gsap.to(circle, {
                                            strokeDasharray: mappedProgress.toFixed(2)
                                        });

                                        // Get dynamic elements
                                        const items = document.querySelectorAll("#proj_screens .proj-screen-item");
                                        const spans = document.querySelectorAll("#proj_screens #proj_screens_progress span");

                                        const itemCount = items.length;
                                        const segmentSize = 100 / itemCount;

                                        // Find current segment index based on progress
                                        let activeIndex = Math.floor(progress / segmentSize);
                                        if (activeIndex >= itemCount) activeIndex = itemCount - 1;

                                        // Update span visibility
                                        spans.forEach((el, index) => {
                                            if (index === activeIndex) {
                                                el.classList.add("show");
                                            } else {
                                                el.classList.remove("show");
                                            }
                                        });
                                    },
                                }
                            });

                            const elements_except_last = gsap.utils.toArray(".proj-screen-item:not(:last-child)");

                            // Animate each element individually
                            elements_except_last.forEach((item, index) => {
                                hero_section_tl.to(item, {
                                    css: { 
                                        clipPath: "polygon(0px 0%, 100% 0px, 100% 0px, 0px 0px)",
                                        WebkitClipPath: "polygon(0px 0px, 100% 0px, 100% 0px, 0px 0px)"
                                    },
                                    stagger: 0.5,
                                });
                            });

                        window.addEventListener("load", () => {
                            ScrollTrigger.refresh();
                        });
                    }

                //  Both Desktop and Mobile

                    //  PIXI Canvas
                        //  Create App
                            const app = new PIXI.Application({
                                width: document.documentElement.clientWidth,
                                height: window.innerHeight,
                                backgroundAlpha: 0, 
                                view: canvas_el, 
                            });

                        //  Background Image
                            let bgSprite = null;

                            PIXI.Assets.load('./images/project-fs-2.jpg').then((texture) => {
                                if (!texture) {
                                    console.error('Failed to load texture');
                                    return;
                                }

                                if (!bgSprite) { 
                                    bgSprite = new PIXI.Sprite(texture);
                                    bgSprite.anchor.set(0.5);
                                    app.stage.addChildAt(bgSprite, 0);

                                    const vertexShader = `
                                      precision mediump float;

                                      attribute vec2 aVertexPosition;
                                      attribute vec2 aTextureCoord;

                                      uniform mat3 projectionMatrix;

                                      varying vec2 vTextureCoord;

                                      void main() {
                                        vTextureCoord = aTextureCoord;
                                        gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
                                      }
                                    `;

                                    const fragmentShader = `
                                      precision mediump float;

                                      varying vec2 vTextureCoord;
                                      uniform sampler2D uSampler;
                                      uniform vec2 sphereCenter;
                                      uniform float sphereRadius;
                                      uniform float focusFactor;
                                      uniform float chromaticAberrationFactor;
                                      uniform float aspectRatio;

                                      vec2 getDistortedUv(vec2 uv, vec2 direction, float factor) {
                                        return uv - direction * factor;
                                      }

                                      void main() {
                                        vec2 uv = vTextureCoord;

                                        // Correct distance and direction calculations for aspect ratio
                                        vec2 p = vec2(
                                          (uv.x - sphereCenter.x) * aspectRatio,
                                          uv.y - sphereCenter.y
                                        );

                                        float d = length(p);
                                        vec2 distortionDirection = normalize(p);

                                        float focusRadius = sphereRadius * focusFactor;
                                        float focusStrength = sphereRadius / 2.0;

                                        float focusSdf = d - focusRadius;
                                        float sphereSdf = d - sphereRadius;

                                        float edge = 0.02;
                                        float inside = 1.0 - smoothstep(0.0, edge, sphereSdf);

                                        float magnifierFactor = focusSdf / (sphereRadius - focusRadius);
                                        float mFactor = clamp(magnifierFactor * inside, 0.0, 1.0);
                                        mFactor = pow(mFactor, 4.0);

                                        vec3 distortionFactors = vec3(
                                          mFactor * focusStrength * (1.0 + chromaticAberrationFactor),
                                          mFactor * focusStrength,
                                          mFactor * focusStrength * (1.0 - chromaticAberrationFactor)
                                        );

                                        vec2 uvR = getDistortedUv(uv, distortionDirection, distortionFactors.r);
                                        vec2 uvG = getDistortedUv(uv, distortionDirection, distortionFactors.g);
                                        vec2 uvB = getDistortedUv(uv, distortionDirection, distortionFactors.b);

                                        float r = texture2D(uSampler, uvR).r;
                                        float g = texture2D(uSampler, uvG).g;
                                        float b = texture2D(uSampler, uvB).b;

                                        gl_FragColor = vec4(r, g, b, 1.0);
                                      }
                                    `;

                                    const aspectRatio = canvas_el.getBoundingClientRect().width / canvas_el.getBoundingClientRect().height;

                                    const lensFilter = new PIXI.Filter(vertexShader, fragmentShader, {
                                      sphereCenter: [1.5, 1.5],
                                      sphereRadius: 0.15,
                                      focusFactor: 0.35,
                                      chromaticAberrationFactor: 0.1,
                                      aspectRatio: aspectRatio
                                    });

                                    window.addEventListener("resize", () => {
                                      lensFilter.uniforms.aspectRatio = document.querySelector("#serviceCanvas").getBoundingClientRect().width / document.querySelector("#serviceCanvas").getBoundingClientRect().height;
                                    });

                                    app.stage.filters = [lensFilter];
                                    app.stage.interactive = true;


                                    canvas_el.addEventListener('pointermove', (event) => {
                                      if (event.pointerType !== 'mouse' && event.pointerType !== 'pen') return;

                                      const globalX = event.clientX;
                                      const globalY = event.clientY;

                                      const screenWidth = document.documentElement.clientWidth;
                                      const screenHeight = window.innerHeight;

                                      const normalizedX = Math.min(Math.max(globalX / screenWidth, 0), 1);
                                      const normalizedY = Math.min(Math.max(globalY / screenHeight, 0), 1);

                                      gsap.to(lensFilter.uniforms.sphereCenter, {
                                        duration: 1.5,
                                        0: normalizedX,
                                        1: normalizedY,
                                        ease: "power4.out"
                                      });
                                    });

                                }

                                // Function to scale and position the background
                                function resizeBackground() {
                                    console.log("resizeBackground triggered");

                                    const canvasWidth = document.documentElement.clientWidth;
                                    const canvasHeight = app.renderer.height;
                                    const imgWidth = bgSprite.texture.width;
                                    const imgHeight = bgSprite.texture.height;

                                    // Scale to cover the canvas while maintaining aspect ratio
                                    const scale = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);
                                    bgSprite.scale.set(scale);

                                    // Center the image
                                    bgSprite.x = canvasWidth / 2;
                                    bgSprite.y = canvasHeight / 2;
                                }

                                // Initial resize
                                resizeBackground();

                                // Listen for window resize events
                                window.addEventListener('resize', () => {
                                    app.renderer.resize(document.documentElement.clientWidth, window.innerHeight);
                                    resizeBackground(); // Only update the sprite, do NOT reload assets
                                });

                            }).catch((err) => {
                                console.error('Error loading image:', err);
                            });

                        //  Text
                            const textContainer = new PIXI.Container();

                            // Function to update text metrics dynamically (widths + font sizes)
                            function updateTextMetrics() {
                                const screenWidth = document.documentElement.clientWidth;

                                return {
                                    headingTextWidth: screenWidth * 0.9,
                                    descriptionTextWidth: screenWidth * 0.6,
                                    headingFontSize: Math.min(Math.max(screenWidth * 0.08, 35), 90),         // min 35px, max 90px
                                    descriptionFontSize: Math.min(Math.max(screenWidth * 0.025, 16), 30)     // min 16px, max 30px
                                };
                            }

                            // Function to create text styles
                            function createTextStyles() {
                                const {
                                    headingTextWidth,
                                    descriptionTextWidth,
                                    headingFontSize,
                                    descriptionFontSize
                                } = updateTextMetrics();

                                return {
                                    headingStyle: new PIXI.TextStyle({
                                        fontFamily: 'Arial',
                                        fontSize: headingFontSize,
                                        fontWeight: 'bold',
                                        fill: '#ffffff',
                                        wordWrap: true,
                                        wordWrapWidth: headingTextWidth,
                                        resolution: window.devicePixelRatio || 1
                                    }),
                                    descriptionStyle: new PIXI.TextStyle({
                                        fontFamily: 'Arial',
                                        fontSize: descriptionFontSize,
                                        fill: '#ffffff',
                                        lineHeight: descriptionFontSize * 1.2,
                                        wordWrap: true,
                                        wordWrapWidth: descriptionTextWidth,
                                        resolution: window.devicePixelRatio || 1
                                    })
                                };
                            }

                            // Initialize styles and texts
                            let { headingStyle, descriptionStyle } = createTextStyles();

                            const headingText = new PIXI.Text('DIGITAL TRANSFORMATION', headingStyle);
                            const descriptionText = new PIXI.Text(
                                "We don’t just navigate technology—we harness it. Every click and interaction reflects your brand’s identity, shaping a digital presence that moves in sync with your vision.",
                                descriptionStyle
                            );

                            textContainer.addChild(headingText);
                            textContainer.addChild(descriptionText);
                            app.stage.addChild(textContainer);

                            // Function to align texts vertically
                            function alignText() {
                                // Determine padding based on screen width (Padding is either 50 or 25 depending if dekstop or mobile 768px breakpoint)
                                let padding = window.innerWidth >= 768 ? 50 : 25;
                                let bottomY = app.screen.height - padding;

                                const {
                                    headingTextWidth,
                                    descriptionTextWidth
                                } = updateTextMetrics();

                                // Update word wrap widths in styles
                                headingText.style.wordWrapWidth = headingTextWidth;
                                descriptionText.style.wordWrapWidth = descriptionTextWidth;

                                descriptionText.x = padding;
                                descriptionText.y = bottomY - descriptionText.height;
                                headingText.x = padding;
                                headingText.y = bottomY - headingText.height - descriptionText.height;
                            }

                            // Initial alignment
                            alignText();

                            // Handle window resizing
                            window.addEventListener("resize", () => {
                                ({ headingStyle, descriptionStyle } = createTextStyles());

                                headingText.style = headingStyle;
                                descriptionText.style = descriptionStyle;

                                alignText();
                            });

                        //  Wavy Text Effect
                            const wavyFragmentShader = `
                                precision mediump float;

                                varying vec2 vTextureCoord;
                                uniform sampler2D uSampler;
                                uniform float time;
                                
                                uniform float amplitudeY;
                                uniform float frequencyY;
                                uniform float speedY;
                                
                                uniform float amplitudeX;
                                uniform float frequencyX;
                                uniform float speedX;

                                void main(void) {
                                    vec2 uv = vTextureCoord;

                                    // Vertical wave
                                    uv.y += sin(uv.x * frequencyY + time * speedY) * amplitudeY;
                                    uv.y += sin(uv.x * (frequencyY * 0.7) + time * (speedY * 1.3)) * (amplitudeY * 0.7);

                                    // Horizontal wave
                                    uv.x += cos(uv.y * frequencyX + time * speedX) * amplitudeX;
                                    uv.x += cos(uv.y * (frequencyX * 0.8) + time * (speedX * 1.1)) * (amplitudeX * 0.5);

                                    gl_FragColor = texture2D(uSampler, uv);
                                }
                            `;

                            // Initial uniforms (for wide screens)
                            const defaultUniforms = {
                                amplitudeY: 0.010,
                                frequencyY: 21.0,
                                speedY: 0.8,

                                amplitudeX: 0.002,
                                frequencyX: 3.0,
                                speedX: 0.2
                            };

                            // Create uniforms object with initial values
                            const wavyShaderUniforms = {
                                time: 1.0,
                                ...defaultUniforms
                            };

                            const wavyFilter = new PIXI.Filter(null, wavyFragmentShader, wavyShaderUniforms);
                            wavyFilter.padding = 20;
                            textContainer.filters = [wavyFilter];

                            app.ticker.add((delta) => {
                                wavyFilter.uniforms.time += 0.05 * delta;
                            });

                            // Resize handler to adjust effect intensity based on screen width
                            function updateWaveIntensity() {
                                const width = window.innerWidth;

                                if (width < 768) {
                                    // Small screens – reduce effect intensity
                                    wavyFilter.uniforms.amplitudeY = 0.004;
                                    wavyFilter.uniforms.frequencyY = 18.0;
                                    wavyFilter.uniforms.speedY = 0.6;

                                    wavyFilter.uniforms.amplitudeX = 0.001;
                                    wavyFilter.uniforms.frequencyX = 2.0;
                                    wavyFilter.uniforms.speedX = 0.1;
                                } else if (width < 1024) {
                                    // Medium screens – slightly reduce
                                    wavyFilter.uniforms.amplitudeY = 0.007;
                                    wavyFilter.uniforms.frequencyY = 20.0;
                                    wavyFilter.uniforms.speedY = 0.7;

                                    wavyFilter.uniforms.amplitudeX = 0.0015;
                                    wavyFilter.uniforms.frequencyX = 2.5;
                                    wavyFilter.uniforms.speedX = 0.15;
                                } else {
                                    // Large screens – default intensity
                                    Object.assign(wavyFilter.uniforms, defaultUniforms);
                                }
                            }

                            // Initial intensity setup
                            updateWaveIntensity();

                            // Attach resize listener
                            window.addEventListener('resize', updateWaveIntensity);

                    //  Service Items Show More Button Event
                        item_els.forEach(el => {
                            el.querySelector("button").addEventListener("click", (event) => {
                                const button = event.target;
                                const nextEl = button.nextElementSibling;

                                if (button.classList.contains('opened')) {
                                    button.classList.remove('opened');
                                    nextEl.classList.remove('show-item-ul');
                                } else {
                                    button.classList.add('opened');
                                    nextEl.classList.add('show-item-ul');
                                }

                                ScrollTrigger.refresh();
                            });
                        });

                //  Check DOMContentLoaded and load (assets (images, stylesheets, fonts, etc..) events are done
                    document.addEventListener("DOMContentLoaded", () => {
                        document.fonts.ready.then(() => {
                            setTimeout(() => {
                                if (document.readyState === "complete") {
                                    servicesPageFunc();
                                } else {
                                    window.addEventListener("load", servicesPageFunc);
                                }
                            }, 500);
                        });
                    });

                //  Services Page Function
                    function servicesPageFunc() {

                        //  GSAP Config
                            gsap.registerPlugin(ScrollTrigger);
                            gsap.config({ force3D: true, trialWarn: false });

                        //  Update ScrollTrigger on resize
                            let resizeTimeout;
                            window.addEventListener("resize", () => {
                              clearTimeout(resizeTimeout);
                              resizeTimeout = setTimeout(() => {
                                ScrollTrigger.refresh();
                              }, 200);
                            });

                        //  GSAP Media Query
                            let gsapMediaQueries = gsap.matchMedia();

                            gsapMediaQueries.add("(min-width: 768px)", () => {
                                desktopFunction();                                
                            });

                            gsapMediaQueries.add("(max-width: 767px)", () => {
                                mobileFunction();
                            });
                    }

            })();
        </script>
    <!-- End Animation JavaScript -->


</body>


</html>
